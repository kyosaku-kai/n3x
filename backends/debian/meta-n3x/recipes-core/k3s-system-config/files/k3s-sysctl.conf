# Sysctl settings required for k3s networking
# Applied at boot by systemd-sysctl.service

# Enable IP forwarding (required for pod networking)
net.ipv4.ip_forward = 1
net.ipv6.conf.all.forwarding = 1

# Enable bridge netfilter (required for pod networking)
net.bridge.bridge-nf-call-iptables = 1
net.bridge.bridge-nf-call-ip6tables = 1

# Increase conntrack table size for production workloads
net.netfilter.nf_conntrack_max = 131072

# Increase inotify limits for container workloads
fs.inotify.max_user_watches = 524288
fs.inotify.max_user_instances = 512

# Increase file descriptor limits
fs.file-max = 2097152

# Memory overcommit (k3s default recommendation)
vm.overcommit_memory = 1
vm.panic_on_oom = 0
