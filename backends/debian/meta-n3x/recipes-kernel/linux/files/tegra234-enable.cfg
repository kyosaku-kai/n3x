# tegra234-enable.cfg
# Tegra234 SoC support for NVIDIA Jetson Orin Nano
# Applied on top of arm64 defconfig for kernel 6.12 LTS
#
# Enables: BPMP, GPIO, I2C, SPI, USB, PCIe, MGBE Ethernet,
#          Audio (AHUB/ADMAIF/I2S/DMIC/DSPK/HDA), timers,
#          watchdog, thermal, CPUFREQ, IOMMU, memory controller
#
# Does NOT enable: GPU, display, DLA, camera/ISP

# SoC selection
CONFIG_ARCH_TEGRA=y
CONFIG_ARCH_TEGRA_234_SOC=y

# NVIDIA BYOK requirement
CONFIG_ARM64_PMEM=y

# BPMP (CRITICAL - required for boot: clocks, power, thermal)
CONFIG_TEGRA_BPMP=y
CONFIG_CLK_TEGRA_BPMP=y
CONFIG_TEGRA_IVC=y
CONFIG_RESET_TEGRA_BPMP=y

# Mailbox (required for BPMP communication)
CONFIG_MAILBOX=y
CONFIG_TEGRA_HSP_MBOX=y

# Pinctrl
CONFIG_PINCTRL=y
CONFIG_PINCTRL_TEGRA=y
CONFIG_PINCTRL_TEGRA234=y

# PMC (Power Management Controller)
CONFIG_SOC_TEGRA_PMC=y

# GPIO
CONFIG_GPIOLIB=y
CONFIG_GPIO_TEGRA186=y
CONFIG_OF_GPIO=y

# I2C
CONFIG_I2C=y
CONFIG_I2C_CHARDEV=y
CONFIG_I2C_TEGRA=y

# SPI
CONFIG_SPI=y
CONFIG_SPI_TEGRA210_QUAD=y
CONFIG_SPI_TEGRA114=y

# Serial (UART)
CONFIG_SERIAL_TEGRA=y
CONFIG_SERIAL_TEGRA_TCU=y

# USB Host (XHCI)
CONFIG_USB_XHCI_HCD=y
CONFIG_USB_XHCI_TEGRA=y

# USB Device (XUDC)
CONFIG_USB_GADGET=y
CONFIG_USB_TEGRA_XUDC=y

# USB PHY
CONFIG_PHY_TEGRA_XUSB=y
CONFIG_PHY_TEGRA194_P2U=y

# PCIe
CONFIG_PCI=y
CONFIG_PCIE_TEGRA194=y
CONFIG_PCIE_TEGRA194_HOST=y

# Ethernet (MGBE via stmmac/DWMAC)
CONFIG_NETDEVICES=y
CONFIG_ETHERNET=y
CONFIG_STMMAC_ETH=y
CONFIG_STMMAC_PLATFORM=y
CONFIG_DWMAC_TEGRA=y

# SDHCI/MMC
CONFIG_MMC=y
CONFIG_MMC_SDHCI=y
CONFIG_MMC_SDHCI_PLTFM=y
CONFIG_MMC_SDHCI_TEGRA=y

# DMA
CONFIG_TEGRA186_GPC_DMA=y
CONFIG_TEGRA210_ADMA=y

# Audio - ASoC Tegra stack
CONFIG_SOUND=y
CONFIG_SND=y
CONFIG_SND_SOC=y
CONFIG_SND_SOC_TEGRA=y
CONFIG_SND_SOC_TEGRA210_AHUB=y
CONFIG_SND_SOC_TEGRA210_ADMAIF=y
CONFIG_SND_SOC_TEGRA210_I2S=y
CONFIG_SND_SOC_TEGRA210_DMIC=y
CONFIG_SND_SOC_TEGRA186_DSPK=y
CONFIG_SND_SOC_TEGRA210_ADMA=y

# HDA (HD Audio)
CONFIG_SND_HDA_TEGRA=y

# Memory controller and interconnect
CONFIG_TEGRA_MC=y
CONFIG_TEGRA234_MC=y
CONFIG_INTERCONNECT=y
CONFIG_INTERCONNECT_TEGRA=y

# Fuse/NVMEM
CONFIG_TEGRA_FUSE=y
CONFIG_NVMEM=y
CONFIG_NVMEM_SYSFS=y
CONFIG_NVMEM_TEGRA_FUSE=y

# Timers
CONFIG_TEGRA186_TIMER=y

# PWM
CONFIG_PWM=y
CONFIG_PWM_TEGRA=y

# Watchdog
CONFIG_WATCHDOG=y
CONFIG_TEGRA_WATCHDOG=y

# IOMMU (ARM SMMU)
CONFIG_IOMMU_SUPPORT=y
CONFIG_ARM_SMMU=y
CONFIG_ARM_SMMU_V3=y
CONFIG_IOMMU_IO_PGTABLE_ARMV7S=y

# Thermal
CONFIG_THERMAL=y
CONFIG_THERMAL_HWMON=y
CONFIG_TEGRA_SOCTHERM=y
CONFIG_TEGRA_BPMP_THERMAL=y

# CPUFREQ
CONFIG_CPU_FREQ=y
CONFIG_CPUFREQ_DT=y
CONFIG_ARM_TEGRA_CPUFREQ=y

# Power management
CONFIG_PM=y
CONFIG_PM_SLEEP=y
CONFIG_SUSPEND=y
CONFIG_PM_GENERIC_DOMAINS=y
CONFIG_PM_GENERIC_DOMAINS_OF=y

# RTC
CONFIG_RTC_CLASS=y
CONFIG_RTC_DRV_TEGRA=y

# Regulators
CONFIG_REGULATOR=y
CONFIG_REGULATOR_FIXED_VOLTAGE=y
CONFIG_REGULATOR_GPIO=y

# Host1x (subsystem bus, needed by some Tegra peripherals)
CONFIG_TEGRA_HOST1X=y
CONFIG_TEGRA_HOST1X_CONTEXT_BUS=y

# Control Backbone (CBB - error reporting for SoC interconnect)
CONFIG_TEGRA_CBB=y

# Device tree support (overlay support for runtime DT modifications)
CONFIG_OF=y
CONFIG_OF_EARLY_FLATTREE=y
CONFIG_OF_FLATTREE=y
CONFIG_OF_DYNAMIC=y
CONFIG_OF_OVERLAY=y

# Firmware loading
CONFIG_FW_LOADER=y
CONFIG_FW_LOADER_USER_HELPER=y

# Debug filesystems (for initial bring-up, disable for production)
CONFIG_DEBUG_FS=y
CONFIG_PROC_FS=y
CONFIG_SYSFS=y
